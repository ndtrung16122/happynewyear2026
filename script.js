let chars,particles,canvas,ctx,w,h,current,duration=2026,str=["Mừng","Xuân","Bính","Ngọ"];function makeChar(t){let e=document.createElement("canvas"),n=e.width=e.height=w<400?200:300,a=e.getContext("2d");a.font="bold "+n+"px Arial",a.fillStyle="white",a.textBaseline="middle",a.textAlign="center",a.fillText(t,n/2,n/2);let r=a.getImageData(0,0,n,n),i=[];for(var c=0;i.length<particles;c++){let t=n*Math.random(),e=n*Math.random(),a=parseInt(e)*n*4+4*parseInt(t);r.data[a]&&i.push([t-n/2,e-n/2])}return i}function init(){canvas=document.createElement("canvas"),document.body.append(canvas),document.body.style.margin=0,document.body.style.overflow="hidden",document.body.style.background="black",ctx=canvas.getContext("2d")}function resize(){w=canvas.width=innerWidth,h=canvas.height=innerHeight,particles=innerWidth<400?55:99}function makeChars(t){let e=parseInt(t/duration)%str.length;current!==e&&(current=e,chars=[...str[e]].map(makeChar))}function render(t){makeChars(t),requestAnimationFrame(render),ctx.fillStyle="#00000010",ctx.fillRect(0,0,w,h),chars.forEach(((e,n)=>firework(t,n,e)))}function firework(t,e,n){t-=200*e;let a=e+chars.length*parseInt(t-t%duration);t=t%duration/duration;let r=(e+1)*w/(1+chars.length);r+=100*Math.min(.33,t)*Math.sin(a);let i=.5*h;i+=Math.sin(4547.411*a)*h*.1,t<.33?rocket(r,i,a,3*t):explosion(n,r,i,a,Math.min(1,2*Math.max(0,t-.33)))}function rocket(t,e,n,a){ctx.fillStyle="white";let r=2-2*a+16*Math.pow(a,15*a);circle(t,e=h-e*a,r)}function explosion(t,e,n,a,r){let i=r*r*r*20,c=1*Math.sin(a)+3;c=r<.5?(r+.5)*r*c:c-r*c,ctx.fillStyle=`hsl(${55*a}, 55%, 55%)`,t.forEach(((t,l)=>{l%20==0&&(ctx.fillStyle=`hsl(${55*a}, 55%, ${55+r*Math.sin(55*r+l)*45}%)`),circle(r*t[0]+e,h-n+r*t[1]+i,c)}))}function circle(t,e,n){ctx.beginPath(),ctx.ellipse(t,e,n,n,0,0,6.283),ctx.fill()}init(),resize(),requestAnimationFrame(render),addEventListener("resize",resize);